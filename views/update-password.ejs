<% layout("/layouts/boilerplate") %>
<br />
<br />

<style>
  .form_body {
    background-color: #f1f1f1;
    border-radius: 8px;
    padding: 30px;
    box-shadow: 0 7px 15px rgba(113, 113, 113, 0.626);
    transition: transform 0.3s ease, box-shadow 0.3s ease;
  }

  .update_form .password-wrapper {
    position: relative;
  }

  .update_form input[type="password"],
  .update_form input[type="text"] {
    border-radius: 5px;
    padding: 12px;
    width: 100%;
    margin-top: 10px;
  }

  .pw-toggle-btn {
    position: absolute;
    right: 10px;
    top: 62%; /* moved slightly downward */
    transform: translateY(-50%);
    border: none;
    background: transparent;
    padding: 4px;
    cursor: pointer;
  }

  .pw-toggle-btn i {
    color: #555;
    font-size: 18px;
    pointer-events: none;
  }

  /* Dark Mode Styles */
  .dark-mode {
    .form_body {
      background-color: #2e2e2e;
      box-shadow: 0 7px 15px rgba(0, 0, 0, 0.5);
    }

    h1 {
      color: white !important;
    }

    .update_form input[type="password"],
    .update_form input[type="text"] {
      background-color: #2c2c2c;
      color: #ffffff;
      border: 1px solid #555555;
    }

    .update_form label {
      color: #fff;
    }

    .update_form input::placeholder {
      color: #aaaaaa;
    }

    .pw-toggle-btn i {
      color: #aaa;
    }
  }
</style>

<div class="row">
  <h1 style="text-align: center">Update Password</h1>
  <div class="col-11 col-md-8 col-lg-4 mx-auto form_body">
    <form action="/user/updatePass" method="POST" class="update_form">
      <div class="mb-3 password-wrapper">
        <label for="currentPassword" class="form-label"
          >Current Password:</label
        >
        <input
          type="password"
          id="currentPassword"
          name="currentPass"
          placeholder="Enter Current Password"
          required
        />
        <button
          type="button"
          class="pw-toggle-btn"
          data-target="currentPassword"
        >
          <i class="fa fa-eye"></i>
        </button>
      </div>

      <div class="mb-3 password-wrapper">
        <label for="newPassword" class="form-label">New Password:</label>
        <input
          type="password"
          id="newPassword"
          name="newPass"
          placeholder="Enter New Password"
          required
        />
        <button type="button" class="pw-toggle-btn" data-target="newPassword">
          <i class="fa fa-eye"></i>
        </button>
      </div>

      <div class="d-grid gap-2">
        <button class="btn btn-danger" type="submit">Update Password</button>
        <a href="/profile" class="btn btn-secondary">Cancel</a>
      </div>
    </form>
  </div>
</div>

<script>
  document.querySelectorAll(".pw-toggle-btn").forEach((btn) => {
    btn.addEventListener("click", () => {
      const target = document.getElementById(btn.dataset.target);
      const icon = btn.querySelector("i");
      if (target.type === "password") {
        target.type = "text";
        icon.classList.remove("fa-eye");
        icon.classList.add("fa-eye-slash");
      } else {
        target.type = "password";
        icon.classList.remove("fa-eye-slash");
        icon.classList.add("fa-eye");
      }
    });
  });
</script>

<!-- Font Awesome CDN -->
<link
  rel="stylesheet"
  href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
/>
